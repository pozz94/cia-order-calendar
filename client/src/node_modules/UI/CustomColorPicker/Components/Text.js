import React from "react";
import ColorPickerContext from "./Context";
import { string2color } from "./utils/converters";

const Text = props => {
	return(
		<ColorPickerContext.Consumer>
			{context => {
				const val = () => {
					let text = context.text;
					if (context.temp === undefined || context.temp === null) {
						text = context.text
					}
					else {
						text = context.temp
					}
					return text;
				};
				return (
					<input
						className={[
							context.theme && context.theme.text,
							props.className
						]
							.join(" ")
							.trim()}
						style={props.style}
						type="text"
						onKeyPress={e => {
							if (e.key !== 'Enter') { return; }
							e.preventDefault();
							context.updateColor(string2color(context.temp));
							context.setTemp(null);
						}}
						onChange={(e) => {
							context.setTemp(e.target.value);
						}}
						value={val()}
						spellCheck="false"
					/>
				);
			}}
		</ColorPickerContext.Consumer>
	);
};

export default Text;
