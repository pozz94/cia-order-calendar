import React from "react";
import ColorPickerContext from "../Context";
import { rgba2string, hsla2string } from "../utils/converters";

const alpha = props => (
	<ColorPickerContext.Consumer>
		{context => {
			const RGB = context.rgb;
			const HSL = context.hsl;
			let lowA, highA;
			if (context.text.startsWith("rgb") || context.text.startsWith("#")){
				lowA = rgba2string({ r: RGB.r, g: RGB.g, b: RGB.b, a: 0 });
				highA = rgba2string({ r: RGB.r, g: RGB.g, b: RGB.b, a: 1 });
			}
			else {
				lowA = hsla2string({ h: HSL.h, s: HSL.s, l: HSL.l, a: 0 });
				highA = hsla2string({ h: HSL.h, s: HSL.s, l: HSL.l, a: 1 });
			}
			return (
				<input
					className={[
						context.theme && context.theme.alpha,
						context.theme && context.theme.slider,
						props.className
					]
						.join(" ")
						.trim()}
					style={{
						WebkitAppearance: "none",
						...context.checker(lowA, highA),
						...props.style
					}}
					type="range"
					onChange={e => {
						context.updateAlpha(e.target.value);
					}}
					min="0"
					max="1"
					value={context.rgb.a}
					step="0.01"
				/>
			);
		}}
	</ColorPickerContext.Consumer>
);

export default alpha;
