import React from 'react';
import ModalContext from 'Contexts/modalContext';
import c from 'UI/Modal.module.css';

const modal = () => (
	<ModalContext.Consumer>
		{(context) => (
			<div className={c.modal} onClick={(e) => e.stopPropagation()}>
				<div className={c.buttonWrapper}>
					<h1 className={c.title}>{context.title}</h1>
					{context.isDismissable ?
						<div className={c.dismissButton} onClick={context.dismissModal}>Ã—</div> :
						null
					}
				</div>
				<div className={c.messageWrapper}>
					<p>{context.message}</p>
				</div>
				<div className={c.buttonWrapper}>
					{context.hasOwnProperty('buttons') ?
						context.buttons.map((e, index) => (
							<button
								key={index}
								onClick={() => { e.action(); context.dismissModal(); }}
								className={e.hasOwnProperty('class') ? e.class : ''}
								style={e.hasOwnProperty('style') ? e.style : {}}>
								{e.label}
							</button>)) :
						null
					}
				</div>
			</div>)
		}
	</ModalContext.Consumer>
);

export default modal;